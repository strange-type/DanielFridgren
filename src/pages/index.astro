---
import Layout from "../layouts/Layout.astro";
import Seo from "../components/seo.astro";
import Spacer from "../components/Spacer.astro";
import PageWrapper from "../components/layouts/PageWrapper.astro";
import ContactSection from "../components/layouts/ContactSection.astro";
import { getCollection } from "astro:content";
import { formatDate } from "../utils/date";
import fs from "fs";

// gather SVG logos from public/images/logos at build time
type LogoEntry = { name: string; svg: string };
let logoSvgs: LogoEntry[] = [];
try {
	const logosDir = new URL("../../public/images/logos/", import.meta.url);
	const items = fs.readdirSync(logosDir, { withFileTypes: true });
	logoSvgs = items
		.filter((d) => d.isFile() && d.name.toLowerCase().endsWith(".svg"))
		.map((d) => {
			const fileUrl = new URL(d.name, logosDir);
			const svg = fs.readFileSync(fileUrl, "utf8");
			return { name: d.name, svg };
		});
} catch (err) {
	logoSvgs = [];
}

const logosHtml = logoSvgs
	.map((l) => `<div class="logo-item fadeup-st">${l.svg}</div>`)
	.join("");

//gathering work items for work section
const allWorkItems = await getCollection("work");
const posts = allWorkItems
	.map((item) => ({
		...item.data,
		slug: item.slug,
		url: `/work/${item.slug}`,
	}))
	.sort(
		(a, b) =>
			(Date.parse(b.date || "") || 0) - (Date.parse(a.date || "") || 0),
	);

// Fetch recent blog posts for featured section
const allBlogPosts = (await getCollection("blog"))
	.filter((post) => import.meta.env.DEV || !post.data.draft)
	.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());

// Get the 2 most recent posts
const featuredPosts = allBlogPosts.slice(0, 2);
---

<script>
	import "@mux/mux-player";
</script>

<Layout title="Daniel Fridgren">
	<Seo
		title="Daniel Fridgren — Senior UX Design for product leaders"
		description="Helping organisations build complex products with simple user flows, from discovery to final implementation."
		pathname={Astro.url.pathname}
		keywords={[
			"user experience",
			"ux design",
			"ui design",
			"digital strategy",
			"product design",
			"digital transformation",
			"digital consulting",
			"customer experience",
			"daniel fridgren",
		]}
	/>
	
	<!-- Video Structured Data for Search Engines -->
	<script type="application/ld+json" set:html={JSON.stringify({
		"@context": "https://schema.org",
		"@type": "VideoObject",
		"name": "Daniel Fridgren - UX Design Portfolio Showcase",
		"description": "Senior UX Designer helping organizations build complex products with simple user flows",
		"thumbnailUrl": `${Astro.site}images/og-image.png`,
		"uploadDate": "2025-12-03T16:24:14Z",
		"duration": "PT33S",
		"contentUrl": "https://stream.mux.com/heEyyMTCGulT0201qoOrDX4sj4mi6Kvw7Kc8ryw7MbviY.m3u8",
		"embedUrl": "https://youtu.be/N9Z1nwKOgv8",
		"publisher": {
			"@type": "Person",
			"name": "Daniel Fridgren",
			"url": Astro.site
		}
	})} />

	<PageWrapper>
			<section id="hero" class="section-hero full-bleed">
				<mux-player
					playback-id="heEyyMTCGulT0201qoOrDX4sj4mi6Kvw7Kc8ryw7MbviY"
					accent-color="#e6a92c"
					thumbnail-time="2"
					loop="true"
					autoplay="any"></mux-player>
				<Spacer size="large" />
			</section>

			<section id="about" class="section">
				<div class="grid-columns-2">
					<p class="title-section fadeup-st">About</p>
					<div class="prose">
						<h1 class="fadeup-st">
							Senior UX Design for product leaders who need a
							strong partner
						</h1>
						<br />
						<div class="text fadeup-st">
							Daniel Fridgren is a senior UX designer currently working at <a href="https://wisecompany.se">In Wise Company</a>, where he helps organizations build complex products with simple user flows—from early discovery through to final implementation.	
							<Spacer size="xs" />
						 With 20 years of hands-on experience across established product companies and fast-moving agencies, he brings structure, direction, and design that holds up in the real world.
							<Spacer size="xs" />
							His approach blends strategic insight with practical delivery: understanding what matters, prioritizing effectively, moving quickly, and creating solutions that stand the test of time.
							<Spacer size="xs" />
							Want to discuss a project or explore working together?
						</div>
						<Spacer size="small" />
      <a
        href="/contact"
        class="button fadeup-st"
        data-umami-event="TOP CTA Click">Get in touch</a
      >
					</div>
				</div>
			</section>
			<Spacer size="xl" />
			<section id="services" class="section">
				<div class="grid-columns-2">
					<p class="title-section fadeup-st">Services</p>
					<div class="prose">
						<h1 class="fadeup-st">
							Supporting product teams with clarity and direction
						</h1>
						<Spacer size="small" />
						<ul class="list-styled fadeup-st">
							<li class="">
								<img
									src="/images/icon-product-design.svg"
									alt="Product design icon"
									width="28"
									height="28"
								/>
								<div class="service-item">
									<p class="heading-sub-lg">
										Product design
									</p>
									<p
											class="text"
										style="margin: 0; margin-top: 0.25rem;"
									>
										From early discovery to final interface
										— translating insights, constraints and
										business goals into products that work.
									</p>
								</div>
							</li>
							<li class="">
								<img
									src="/images/icon-user-research.svg"
									alt="User research icon"
									width="28"
									height="28"
								/>
								<div class="service-item">
									<p class="heading-sub-lg">User research</p>
									<p
										class="text"
										style="margin: 0; margin-top: 0.25rem;"
									>
										Planning and conducting research to
										uncover needs, reduce uncertainty and
										inform product decisions with evidence.
									</p>
								</div>
							</li>
							<li class="">
								<img
									src="/images/icon-prototyping.svg"
									alt="Prototyping icon"
									width="28"
									height="28"
								/>
								<div class="service-item">
									<p class="heading-sub-lg">
										Prototyping & validation
									</p>
									<p
										class="text"
										style="margin: 0; margin-top: 0.25rem;"
									>
										Building interactive prototypes to
										explore concepts, validate assumptions
										and improve usability before investing
										in development.
									</p>
								</div>
							</li>
							<li class="">
								<img
									src="/images/icon-strategy.svg"
									alt="Strategy icon"
									width="28"
									height="28"
								/>
								<div class="service-item">
									<p class="heading-sub-lg">
										Design strategy
									</p>
									<p
										class="text"
										style="margin: 0; margin-top: 0.25rem;"
									>
										Clarifying product direction by aligning
										user needs, business priorities, and
										technical realities.
									</p>
								</div>
							</li>
							<li class="">
								<img
									src="/images/icon-teambuilding.svg"
									alt="Building teams icon"
									width="28"
									height="28"
								/>
								<div class="service-item">
									<p class="heading-sub-lg">
										Design team enablement
									</p>

									<p
										class="text"
										style="margin: 0; margin-top: 0.25rem;"
									>
										Helping organisations grow confident,
										autonomous design teams through
										coaching, hiring support and practical
										ways of working.
									</p>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</section>
			<Spacer size="xl" />
			<section id="work" class="section">
				<div class="service-item">
					<h1 class="fadeup-st">Selected case studies</h1>
					<div class="text fadeup-st">
						A curated mix of UX, discovery and research work from
						recent engagements.
					</div>
					<Spacer size="small" />
					<div class="portfolio">
						{
							posts.map((p) => (
								<a
									class="portfolio-item link-unstyled fadeup-st"
									href={p.url}
									aria-label={`Open case study about ${p.title || p.slug}`}
								>
									{p.heroImage ? (
										<figure class="portfolio-figure">
											<img
												src={
													p.heroImage ||
													"/images/og-image.png"
												}
												alt={p.title || ""}
												loading="lazy"
											/>
										</figure>
									) : null}

									<div class="portfolio-card-header">
										<div class="portfolio-card-title">
											{p.description || ""}
										</div>
										<h3 class="portfolio-card-subtitle">
											{p.client || p.slug}
										</h3>
									</div>
								</a>
								<Spacer size="xs" />
							))
						}
					</div>

					{
						posts.length === 0 ? (
								<div class="text">
								<p>
									No case posts found.
								</p>
							</div>
						) : null
					}
				</div>
			</section>
			<Spacer size="large" />
			
				<section id="blog-featured" class="section">
				<div class="service-item">
					<h1 class="fadeup-st">Latest from the blog</h1>
					<div class="text fadeup-st">
						Recent thoughts on design, complexity and technology.
					</div>
					<Spacer size="small" />
					
					<div class="blog-cards">
						{featuredPosts.map((post) => (
							<a
								href={`/blog/${post.slug}`}
								class="blog-card fadeup-st"
							>
								<div class="blog-card-content">
									<time class="blog-card-date" datetime={post.data.pubDate}>
										{formatDate(post.data.pubDate)}
									</time>
									<h3 class="heading-sub-lg">{post.data.title}</h3>
									{post.data.description && (
										<p class="blog-card-description">
											{post.data.description}
										</p>
									)}
								</div>
							</a>
						))}
					</div>
					
					<Spacer size="small" />
					<div class="button-container-right">
						<a
							href="/blog/"
							class="button fadeup-st"
							data-umami-event="All blog posts">All blog posts</a>
					</div>
				</div>
			</section>
            <Spacer size="small" />
            <div class="divider"></div>
            <Spacer size="small" />
 

 <ContactSection />
			<a
				href="https://www.brainville.com/SE/Brainville1"
				target="_blank"
				rel="noopener noreferrer"
				style="position:absolute; left:-9999px;"
			>
				<img
					src="https://www.brainville.com/Content/Images/SocialMedia/OnLight_Flat.svg"
					alt="Check out our company profile in Brainville"
				/>
			</a>
		</PageWrapper>
</Layout>

<style>
	/* Full bleed hero section */
	.section-hero.full-bleed {
		width: 100vw;
		max-width: 1600px;
		margin-left: 50%;
		transform: translateX(-50%);
		margin-top: 0;
		margin-bottom: var(--space-xl);
	}

	.section-hero.full-bleed mux-player {
		width: 100%;
		height: auto;
	}

	@media (max-width: 768px) {
		.section-hero.full-bleed {
			margin-top: calc(-1 * var(--space-s));
		}
	}

	@media (max-width: 1600px) {
		.section-hero.full-bleed {
			width: 100vw;
		}
	}


	/* Logo grid for Employers & Clients */
	.logo-grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: 3rem;
		align-items: center;
		justify-items: left;
	}

	.logo-item img,
	.logo-item svg {
		max-width: 160px;
		width: 100%;
		height: auto;
		display: block;
		object-fit: contain;
	}

	@media (max-width: 640px) {
		.logo-grid {
			grid-template-columns: repeat(2, 1fr);
			gap: 2.5rem;
		}
		.logo-item img,
		.logo-item svg {
			max-width: 120px;
		}
	}

	.service-item p {
		color: var(--color-fg);
	}


	/* Service text highlight effect
	.service-item p {
		color: var(--color-subtle);
		transition: color 0.25s ease;
	}

	.service-item .body-text {
		max-width: 42ch;
	}

	.service-item.in-focus p {
		color: var(--color-fg);
	}

	*/

	/* Work cards stacked layout */

	.blog-cards {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: var(--space-m);
		margin-top: 0;
	}

	.blog-card {
		display: flex;
		flex-direction: column;
		padding: var(--space-l);
		text-decoration: none;
		background: var(--color-gray-50);
		transition: all 0.2s ease;
	}

	.blog-card:hover {
		border-color: var(--color-subtle);
		background: var(--color-white);
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
	}

	.button-container-right {
		display: flex;
		justify-content: flex-end;
	}

	.blog-card-content {
		display: flex;
		flex-direction: column;
		gap: var(--space-xs);
		height: 100%;
	}

	.blog-card-date {
		font-size: var(--fs-xs);
		color: var(--color-muted);
		font-weight: 500;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}


	.blog-card-description {
		font-size: var(--fs-base);
		line-height: var(--leading-base);
		color: var(--color-muted);
		margin: 0;
		margin-top: var(--spaces-xs);
		flex-grow: 1;
	}


	@media (max-width: 768px) {
		.blog-cards {
			grid-template-columns: 1fr;
			gap: var(--space-m);
			margin-top: var(--space-m);
		}

		.blog-card {
			padding: var(--space-l);
		}

		.button-container-right {
			justify-content: left;
		}
	}

	.portfolio-card-stacked {
		display: flex;
		flex-direction: column;
		gap: var(--space-m);
	}


	.portfolio-card-stacked:hover {
		color: var(--color-muted);
	}

	.portfolio-card-stacked .portfolio-figure {
		margin: 0;
		overflow: hidden;
		border-radius: var(--border-radius-base);
	}

	.portfolio-card-stacked .portfolio-figure img {
		width: 100%;
		height: auto;
		display: block;
		transition:
			transform 240ms ease,
			opacity 240ms ease;
	}

	.portfolio-card-stacked:hover .portfolio-figure img {
		transform: scale(1.02);
		opacity: 0.95;
	}

	.portfolio-card-description {
		font-family: var(--font-body);
		font-size: var(--fs-md);
		line-height: var(--leading-base);
		color: var(--color-muted);
		max-width: 60ch;
		margin: 0;
	}

	@media (max-width: 768px) {
		.portfolio-card-description {
			font-size: var(--fs-base);
		}
	}
</style>

<script>
	import { initMuxPlayerFallback } from "../scripts/mux-player-fallback";
	// import { initServiceHighlight } from "../scripts/service-highlight";
	
	// Run on initial load
	initMuxPlayerFallback("baxter-player", "/images/baxter.png", "Baxter dialysis user interface");
	// initServiceHighlight();
	
	// Run on every page navigation
	document.addEventListener("astro:page-load", () => {
		initMuxPlayerFallback("baxter-player", "/images/baxter.png", "Baxter dialysis user interface");
		// initServiceHighlight();
	});
</script>
