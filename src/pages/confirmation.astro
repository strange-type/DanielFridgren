---
import Layout from "../layouts/Layout.astro";
import Spacer from "../components/Spacer.astro";
import PageWrapper from "../components/layouts/PageWrapper.astro";
---

<PageWrapper>
    <Layout title="Thank You" desc="Your submission has been received">
        <Spacer size="2xl" />
        <div class="confirmation-container">
            <h1 id="confirmation-heading">Thank You!</h1>

            <Spacer size="small" />

            <p class="text" id="confirmation-message">Loading...</p>

            <Spacer size="small" />

            <p class="text">
                <a href="/">Return to homepage</a>
            </p>
        </div>
        <Spacer size="2xl" />
    </Layout>
</PageWrapper>

<script>
    // Define content based on type - client-side
    const content = {
        newsletter: {
            heading: "Thank You!",
            message:
                "You've successfully subscribed to the newsletter. Please check your email to confirm your subscription.",
        },
        contact: {
            heading: "Message Sent!",
            message:
                "Thank you for reaching out. I will get back to you as soon as possible.",
        },
    };

    // Get type from URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const type = urlParams.get("type") || "newsletter";

    // Update content
    const currentContent =
        content[type as keyof typeof content] || content.newsletter;

    const headingEl = document.getElementById("confirmation-heading");
    const messageEl = document.getElementById("confirmation-message");

    if (headingEl) headingEl.textContent = currentContent.heading;
    if (messageEl) messageEl.textContent = currentContent.message;

    // Update document title
    document.title =
        type === "contact" ? "Message Sent" : "Subscription Confirmed";
</script>

<style>
    .confirmation-container {
        max-width: 42rem;
        margin: 0 auto;
        padding: 4rem 1rem;
    }

    .confirmation-container h1 {
        margin-bottom: 1.5rem;
    }
</style>
